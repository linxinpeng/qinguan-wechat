{"version":3,"sources":["webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?58b0","webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?8243","webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?c040","webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?c7ed","uni-app:///components/wakary-poster/wakary-poster.vue","webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?fe19","webpack:///D:/青瓜平台/qg-wechat/qingua-wechat/components/wakary-poster/wakary-poster.vue?4894"],"names":[],"mappings":"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","file":"components/wakary-poster/wakary-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wakary-poster.vue?vue&type=template&id=6b9e7128&\"\nvar renderjs\nimport script from \"./wakary-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wakary-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wakary-poster.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/wakary-poster/wakary-poster.vue\"\nexport default component.exports","export * from \"-!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wakary-poster.vue?vue&type=template&id=6b9e7128&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wakary-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wakary-poster.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view>\r\n\t\t\t<canvas canvas-id=\"mini_poster\" :style=\"{ width: canvasW + 'px', height: canvasH + 'px' }\"></canvas>\r\n\t\t</view>\r\n\t\t<view style=\"height: 106rpx;\"></view>\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view style=\"height: 106rpx; align-items: center; background-color: #333333;\">\n\t\t\t\t<button style=\"background: transparent; height: 106rpx; line-height: 106rpx;\" @tap=\"toSaveImage\">保存名片</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmpWxQr: \"https://as.datianshi.com/media/mp/2/wx/qr.PNG\",\r\n\t\t\t\tcanvasW: 0,\r\n\t\t\t\tcanvasH: 0,\r\n\t\t\t\tinvest_areas: [{id: 1, name: \"儿童教育\"}, {id: 1, name: \"少儿编程\"}, {id: 1, name: \"生物智能\"}, {id: 1, name: \"万物相连\"}, {id: 1, name: \"大数据\"}],\n\t\t\t\tnickname: \"热豆Wakary\",\n\t\t\t\tavatar: \"https://as.datianshi.com/media/9/tmp_f9fdf9ee13548fa97fb1e7c8d0be7e30ee02ed1b533d39e7.jpg\",\n\t\t\t\tcompany: \"热豆科技\",\n\t\t\t\tphone: \"17610998099\",\n\t\t\t\temail: \"redoume@163.com\",\n\t\t\t\tlocation: \"北京\",\n\t\t\t\tfinished: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tshowInvestAreas() {\r\n\t\t\t\tif (this.invest_areas) {\r\n\t\t\t\t\tconst names = []\r\n\t\t\t\t\tthis.invest_areas.forEach(item => {\r\n\t\t\t\t\t\tnames.push(item.name)\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn names.join(\" \")\r\n\t\t\t\t}\r\n\t\t\t\treturn '未设置'\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.canvasW = uni.getSystemInfoSync().windowWidth\r\n\t\t\tthis.canvasH = this.calculateCanvasHeight()\n\t\t\tthis.toDrawCanvas()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoSaveImage() {\r\n\t\t\t\tif (!this.finished) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '正在生成图片，稍后再试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'mini_poster',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\ttitle: '保存名片码失败'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '保存名片码失败'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync toDrawCanvas() {\r\n\t\t\t\tconst padding = uni.upx2px(34)\r\n\t\t\t\tconst cardHeight = uni.upx2px(380)\r\n\t\t\t\tconst cw = this.canvasW - 2 * padding\r\n\r\n\t\t\t\tlet ctx = uni.createCanvasContext('mini_poster', this)\r\n\r\n\t\t\t\t// 透明背景\r\n\t\t\t\t// ctx.setFillStyle('rgba(255, 255, 255, 0)')\r\n\t\t\t\tctx.setFillStyle('#F3F4F5')\r\n\t\t\t\tctx.fillRect(0, 0, this.canvasW, this.canvasH)\r\n\t\t\t\t// draw card round rect\r\n\t\t\t\tconst r = uni.upx2px(12)\r\n\t\t\t\tthis.drawRoundRect(ctx, padding, padding, cw, cardHeight, r, 2)\r\n\t\t\t\t// draw card content\r\n\t\t\t\tthis.drawCard(ctx, padding, padding, cw, cardHeight)\r\n\t\t\t\t// draw avatar\r\n\t\t\t\tconst av = uni.upx2px(128)\r\n\t\t\t\tconst hi = await this.downloadImage(this.avatar)\r\n\t\t\t\tif (hi.tempFilePath) {\r\n\t\t\t\t\tconst x = this.canvasW - padding - uni.upx2px(40) - av\r\n\t\t\t\t\tconst y = padding + uni.upx2px(40)\r\n\t\t\t\t\tthis.drawRoundRectAvatar(ctx, x, y, av, av, r, hi.tempFilePath)\r\n\t\t\t\t}\r\n\t\t\t\t// draw hello info\r\n\t\t\t\tthis.drawHelloInfo(ctx, padding, padding + cardHeight + padding, cw)\r\n\t\t\t\t// draw qr code\r\n\t\t\t\tif (this.mpWxQr) {\r\n\t\t\t\t\tconst hello = await this.downloadImage(this.mpWxQr)\r\n\t\t\t\t\tconst padding = uni.upx2px(34)\r\n\t\t\t\t\tconst av = uni.upx2px(180)\r\n\t\t\t\t\tconst totalH = this.calculateCanvasHeight()\r\n\t\t\t\t\tif (hello.tempFilePath) {\r\n\t\t\t\t\t\tctx.drawImage(hello.tempFilePath, this.canvasW - padding - av, totalH - padding - av, av, av)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.draw()\r\n\t\t\t\tthis.finished = true\r\n\t\t\t},\r\n\t\t\tasync drawCard(ctx, x, y, w, h) {\r\n\t\t\t\t// draw company\r\n\t\t\t\tlet vp = y + uni.upx2px(45)\r\n\t\t\t\tconst hp = x + uni.upx2px(52)\r\n\t\t\t\tctx.setTextBaseline('top')\r\n\t\t\t\tconst fz30 = uni.upx2px(30)\r\n\t\t\t\tctx.fillStyle = '#F5A623'\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.company, hp, vp)\r\n\r\n\t\t\t\t// draw nickname\r\n\t\t\t\tvp = vp + 30\r\n\t\t\t\tconst fz50 = uni.upx2px(50)\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz50)\r\n\t\t\t\tctx.fillText(this.nickname, hp, vp)\r\n\r\n\t\t\t\tvp = vp + 42\r\n\t\t\t\tconst iconW = uni.upx2px(30)\r\n\t\t\t\tconst textH = hp + iconW + 6\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/position.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/position.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.location, textH, vp)\r\n\r\n\t\t\t\tvp = vp + 28\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/Mouse-Pointer.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/Mouse-Pointer.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\t// ctx.fillText(this.showInvestAreas, textH, vp)\r\n\t\t\t\tconst oPadding = uni.upx2px(34)\r\n\t\t\t\tconst iPadding = uni.upx2px(40)\r\n\t\t\t\tconst textW = w - textH + oPadding - iPadding\r\n\t\t\t\tthis.drawTextInOneLine(ctx, this.showInvestAreas, textH, vp, textW)\r\n\r\n\t\t\t\tvp = vp + 28\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/phone.png', hp, vp + 3, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tctx.drawImage('../../static/phone.png', hp, vp, iconW, iconW)\r\n\t\t\t\t// #endif\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText(this.phone ? this.phone : '', textH, vp)\r\n\t\t\t},\r\n\t\t\tasync drawHelloInfo(ctx, x, y, w) {\r\n\t\t\t\tlet vp = y + 12\r\n\t\t\t\tconst hp = x\r\n\t\t\t\tctx.setTextBaseline('top')\r\n\t\t\t\tconst fz30 = uni.upx2px(30)\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tctx.setFontSize(fz30)\r\n\t\t\t\tctx.fillText('您好，', hp, vp)\r\n\t\t\t\tconst text = \"我是来自 \" + this.company + ' 的投资人' + this.nickname\r\n\t\t\t\tconst lines = this.drawTextInLines(ctx, text, hp, vp, w, 26)\r\n\t\t\t\tvp += 26 * lines + 26\r\n\t\t\t\tctx.fillText('这是我的名片，请惠存。', hp, vp)\r\n\t\t\t\tvp += 26\r\n\t\t\t\tctx.fillText('谢谢', hp, vp)\r\n\r\n\t\t\t\tvp += 26\r\n\t\t\t\tvp += 40\r\n\t\t\t\tctx.setFillStyle('#F37231')\r\n\t\t\t\tctx.fillRect(hp, vp, 20, 3)\r\n\t\t\t\tvp += 7\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\tconst fz28 = uni.upx2px(28)\r\n\t\t\t\tctx.setFontSize(fz28)\r\n\t\t\t\tctx.fillText('长按识别二维码', hp, vp)\r\n\t\t\t\tvp += 20\r\n\t\t\t\tconst ttt = '在大天使中查看我的更多信息'\r\n\t\t\t\tctx.fillText(ttt, hp, vp)\r\n\t\t\t},\r\n\t\t\tcalculateCanvasHeight() {\r\n\t\t\t\t// 400 is card height\r\n\t\t\t\tconst ctx = uni.createCanvasContext('test_poster')\r\n\t\t\t\tconst padding = uni.upx2px(34)\r\n\t\t\t\tconst text = \"我是来自 \" + this.company + ' 的投资人' + this.nickname\r\n\t\t\t\tconst rows = this.drawTextInLines(ctx, text, padding, 0, this.canvasW - 2 * padding, 26)\r\n\t\t\t\tconst cardH = uni.upx2px(380)\r\n\t\t\t\tconst h = padding * 2 + cardH + padding + 12 + 26 * 3 + rows * 26\r\n\t\t\t\treturn h + 90\r\n\t\t\t},\r\n\t\t\t_drawRoundRect(ctx, x, y, w, h, r) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\t// 左上角\r\n\t\t\t\tctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5)\r\n\t\t\t\t// 右上角\r\n\t\t\t\tctx.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2)\r\n\t\t\t\t// 右下角\r\n\t\t\t\tctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5)\r\n\t\t\t\t// 左下角\r\n\t\t\t\tctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\t// ctx.strokeStyle = '#D8D8D8';\r\n\t\t\t\tctx.fillStyle = '#FFFFFF';\r\n\t\t\t\t// ctx.stroke()\r\n\t\t\t\tctx.fill()\r\n\t\t\t},\r\n\t\t\tdrawRoundRect(ctx, x, y, w, h, r, lineWidth) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tthis._drawRoundRect(ctx, x, y, w, h, r)\r\n\t\t\t\tctx.clip()\r\n\t\t\t\t// draw left border\r\n\t\t\t\tctx.fillStyle = this.company ? '#F37231' : '#333333'\r\n\t\t\t\tconst bWidth = uni.upx2px(12)\r\n\t\t\t\tctx.fillRect(x, y, bWidth, h)\r\n\t\t\t\tctx.restore()\r\n\t\t\t},\r\n\t\t\tdrawRoundRectAvatar(ctx, x, y, w, h, r, imgPath) {\r\n\t\t\t\tctx.save()\r\n\t\t\t\tthis._drawRoundRect(ctx, x, y, w, h, r)\r\n\t\t\t\tctx.clip()\r\n\t\t\t\tctx.drawImage(imgPath, x, y, w, h)\r\n\t\t\t\tctx.restore()\r\n\t\t\t},\r\n\t\t\t// TODO: measureText not works in App\r\n\t\t\tdrawTextInLines(ctx, t, x, y, w, lineHeight) {\r\n\t\t\t\tconst chr = t.split(\"\")\r\n\t\t\t\tlet temp = ''\r\n\t\t\t\tlet row = []\r\n\t\t\t\tfor (let i = 0; i < chr.length; i++) {\r\n\t\t\t\t\tif (ctx.measureText(temp).width < w) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.push(temp)\r\n\t\t\t\t\t\ttemp = ''\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttemp += chr[i]\r\n\t\t\t\t}\r\n\t\t\t\trow.push(temp)\r\n\t\t\t\tfor (const i in row) {\r\n\t\t\t\t\t// i + 1 will be 11, 21,...\r\n\t\t\t\t\tctx.fillText(row[i], x, (y + (i * 1 + 1) * lineHeight))\r\n\t\t\t\t}\r\n\t\t\t\treturn row.length\r\n\t\t\t},\n\t\t\t// TODO: measureText not works in app\r\n\t\t\tdrawTextInOneLine(ctx, t, x, y, w) {\r\n\t\t\t\tconst chr = t.split('')\r\n\t\t\t\tlet temp = ''\r\n\t\t\t\tfor (let i = 0; i < chr.length; i++) {\r\n\t\t\t\t\tif (ctx.measureText(temp + '...').width <= w) {\r\n\t\t\t\t\t\ttemp += chr[i]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttemp = temp.substring(0, temp.length - 1)\r\n\t\t\t\t\t\ttemp += '...'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.fillText(temp, x, y)\r\n\t\t\t},\r\n\t\t\tdownloadImage(url) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\treturn resolve(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\treturn reject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.footer {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\tleft: 0;\n\t\tbottom: 0;\r\n\t\tbox-shadow: none;\r\n\t\tborder-top: 1px solid #E2E2E2;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wakary-poster.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wakary-poster.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1602978976684\n      var cssReload = require(\"D:/Google下载/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}